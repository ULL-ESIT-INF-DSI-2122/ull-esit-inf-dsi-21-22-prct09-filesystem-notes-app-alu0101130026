"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
}
Object.defineProperty(exports, "__esModule", { value: true });
const ms_1 = __importDefault(require("ms"));
function sleep(duration, value) {
    let durationInMilliseconds = duration;
    if (typeof duration === 'number') {
        if (!isFinite(duration) ||
            Math.floor(duration) !== duration ||
            duration < 0) {
            return Promise.reject('Duration must be a non-negative integer.');
        }
    }
    else if (typeof duration === 'string') {
        try {
            durationInMilliseconds = ms_1.default(duration);
            if (typeof durationInMilliseconds === 'undefined' ||
                durationInMilliseconds < 0) {
                return Promise.reject('Invalid duration string.');
            }
        }
        catch (error) {
            return Promise.reject('Invalid duration string.');
        }
    }
    else {
        return Promise.reject('Duration must be a valid number or string.');
    }
    return new Promise(resolve => setTimeout(() => {
        resolve(value);
    }, durationInMilliseconds));
}
exports.sleep = sleep;
